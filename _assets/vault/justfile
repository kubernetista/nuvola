# Justfile

# Variables
# EXAMPLE_VAR := "example"

# List ğŸ“œ all recipes (default)
help:
    @just --list

# Start Vault ğŸ” and detach ğŸ«¥
start-vault:
    @docker compose -f compose.yaml up --detach

# Start Vault ğŸ” and stay attached
start-vault-attached:
    @docker compose -f compose.yaml up

# Start Vault ğŸ” and detach ğŸ«¥
stop-vault:
    @docker compose -f compose.yaml down

# Get the Vault root token and unseal keys (âš ï¸ save them, as can it be executed only once!)
init-vault:
    #@-VAULT_ADDR='http://127.0.0.1:8200' vault operator init
    @-docker exec -it vault vault operator init

# Unseal the Vault
unseal-vault:
    @echo "\nğŸ”’ Unseal Vault - step 1/3"
    @-docker exec -it vault vault operator unseal
    @echo "\nğŸ”’ Unseal Vault - step 2/3"
    @-docker exec -it vault vault operator unseal
    @echo "\nğŸ”’ Unseal Vault - step 3/3"
    @-docker exec -it vault vault operator unseal
    @echo "\nğŸ”“ Now login to Vault"
    @-docker exec -it vault vault login
    @echo "\nğŸ”‘ Vault status"
    @-docker exec -it vault vault status
